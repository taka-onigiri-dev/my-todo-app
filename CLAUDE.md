# CLAUDE.md - プロジェクトガイドライン

このファイルは Claude Code がこのリポジトリで作業する際のガイドラインです。

## 最重要原則: 再構築可能なドキュメント

**コードは消えても、ドキュメントから完全に再構築できる状態を維持する。**

### なぜ重要か

- コードベースが壊れても、設計書があれば復旧可能
- 新しい環境でもゼロから構築できる
- Claude が読めば同じものを再実装できる

### ドキュメント作成ルール

1. **README.md は「実装仕様書」として書く**
   - 「何ができるか」だけでなく「どう実装されているか」を記載
   - データ構造、状態管理、永続化の仕組みを明記
   - 外部から見えない内部仕様も書く

2. **docs/ フォルダに詳細設計を置く**（必要に応じて）
   - `docs/architecture.md` - 全体構成
   - `docs/data-model.md` - データ構造定義
   - `docs/screens.md` - 画面仕様

3. **再構築に必要な情報を必ず含める**
   - 使用ライブラリとバージョン（package.json の主要部分を README にも記載）
   - ファイル構成と各ファイルの責務
   - データの型定義（TypeScript interface）
   - 画面のワイヤーフレーム（テキストベースでOK）

---

## 設計と実装の連動

1. **README.md は常に最新の設計書として維持する**
   - 新機能を実装したら、README.md の「できること」セクションを更新
   - 技術スタックを変更したら、README.md に反映
   - 拡張案を実装したら「今後の拡張案」から「できること」へ移動

2. **実装前に設計を確認**
   - 機能追加の依頼を受けたら、まず README.md の設計内容を確認
   - 設計と矛盾する実装は避ける
   - 必要なら設計変更を提案してから実装

3. **実装後は必ずドキュメント更新**
   - コードを書いたら、対応するドキュメントも同時に更新
   - 「後で書く」は禁止

---

## README.md の必須セクション

README.md には以下を必ず含める:

```markdown
# アプリ名

## 概要
（1-2文でアプリの目的）

## できること（機能一覧）
- 機能1: 詳細説明
- 機能2: 詳細説明

## 技術スタック
- フレームワーク: xxx (バージョン)
- 言語: xxx
- 主要ライブラリ: xxx

## データ構造
（主要な型定義を記載）

## ファイル構成
（ディレクトリツリーと各ファイルの説明）

## 画面仕様
（各画面の要素とユーザー操作）

## セットアップ手順
（ゼロから動かすまでの手順）

## 今後の拡張案
（未実装の機能案）
```

---

## プロジェクト構造

```
my-todo-app/
├── app/                    # 画面コンポーネント (expo-router)
│   ├── _layout.tsx         # ルートレイアウト
│   └── index.tsx           # メイン ToDo 画面
├── src/
│   └── storage/
│       └── todoStorage.ts  # AsyncStorage 永続化
├── assets/                 # 画像アセット
├── CLAUDE.md               # このファイル（Claude用ガイドライン）
├── README.md               # 設計書兼実装仕様書
└── package.json            # 依存関係
```

## 技術スタック

- **フレームワーク**: React Native (Expo SDK 54)
- **言語**: TypeScript
- **ルーティング**: expo-router
- **永続化**: AsyncStorage
- **対象プラットフォーム**: iOS (Expo Go), Android, Web

## コーディング規約

- TypeScript strict モードを使用
- 関数コンポーネント + Hooks を使用
- スタイルは StyleSheet.create で定義
- 日本語コメント可（ユーザーが日本語話者のため）

## コミットメッセージ

日本語で記述。プレフィックス例:
- `feat:` 新機能
- `fix:` バグ修正
- `chore:` 設定変更、依存関係更新
- `docs:` ドキュメント更新
- `refactor:` リファクタリング

## 変更時のチェックリスト

機能を追加・変更したら:
- [ ] README.md を更新したか（機能、データ構造、画面仕様）
- [ ] 新しいファイルがあれば構成図に追加したか
- [ ] 型定義を変更したらドキュメントにも反映したか
- [ ] TypeScript エラーがないか (`npx tsc --noEmit`)
- [ ] アプリが起動するか (`npx expo start`)

## 再構築テスト

定期的に以下を確認:
- README.md だけ読んで、同じアプリを作れるか？
- 必要な情報が欠けていないか？
- 曖昧な記述がないか？
